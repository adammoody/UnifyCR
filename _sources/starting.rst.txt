================
Starting
================

In this section, we describe the mechanisms for starting and stopping UnifyCR in 
a user's allocation. The important features to consider are:

        - Initialization of UnifyCR file system instance across compute nodes
 
---------------------------
Initialization Example 
---------------------------

First, we need to start the UnifyCR daemon on the nodes in your allocation. 
 
.. code-block:: Bash

        export UNIFYCR_META_SERVER_RATIO=1
        export UNIFYCR_META_DB_NAME=unifycr_db
        export UNIFYCR_CHUNK_MEM=0 
        
        NODES=1
        PROCS=1

        mpirun -nnodes ${NODES} -np ${PROCS} ./unifycrd &

The example above will start the UnifyCR daemon on the number of nodes specified 
in the NODES variable.  

Next, we can start run our application with UnifyCR in the following manner:  

.. code-block:: Bash

        export UNIFYCR_USE_SPILLOVER=1
        APP_PATH=/path/to/my/app

        NODES=1
        PROCS=1

        mpirun -nnodes ${NODES} -np ${PROCS} ${HOME}/my_app

The APP_PATH variable is the directory where your application lives. 

So, overall the steps taken to run an application with UnifyCR include:

        1. Allocate Nodes

        2. Update any desired configuration variables in the bash scripts
        
        3. Start the UnifyCR server daemons on each node 

        4. Run your application with UnifyCR   
